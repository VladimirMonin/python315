<!-- 'bg-dark', 'text-white'
bg-light', 'text-dark'
'btn-light
'btn-dark'
Темная тема -->
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="События в JS и их обработка">
    <title>LESSON 5</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            /* font-family: sans-serif; */
            width: 95%;
            margin: 0 auto;
            background-color: #f4f7f2;
        }

        pre code {
            font-size: 1.2em;
            /* background-color: #dfecd7; */
        }

        /* Делаем h2 крупнее */
        h2 {
            font-size: 1.5em;
        }

        /* Убираем промежутки между элементами списка */
        ul {
            padding-inline-start: 0;
            /* Убираем отступы сверху и снизу между элементами списка */
            margin-block-start: 0;
        }

        .blueCircle {
            width: 200px;
            height: 200px;
            background-color: blue;
            border-radius: 50%;
            margin: 0 auto;
        }

        #OnClickBodyInfo {
            margin-top: 5px;
            font-size: 1.5em;
            font-weight: bold;
        }

        #traveler {
            width: 50px;
            height: 50px;
            background-color: red;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <header>
        <ul>
            <li>Обработчик событий встраеваемый прямо в тег HTML</li>
            <li>Обработчик событий через свойство элемента</li>
            <li>Обработчик событий через addEventListener</li>
            <li>Удаление обработчика событий через removeEventListener</li>
            <li>Обработчик событий onclick для body и вывод тега на который был клик</li>
            <li>Обработчик событий onclick для body и перемещение Div по экрану</li>
            <li>Обработчик событий keydown (нажатие пробела) и изменение цвета Div</li>
            <li>Обработчик отправки формы (с отменой стандартного действия браузера)</li>


            
        </ul>
    </header>
    <h2>Таблица событий</h2>
    <!-- Открывающий тег таблицы BS5 полосатая с ховером -->
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Название события</th>
                <th>Описание</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>click</td>
                <td>Происходит при клике левой кнопкой мыши.</td>
            </tr>
            <tr>
                <td>dblclick</td>
                <td>Происходит при двойном клике левой кнопкой мыши.</td>
            </tr>
            <tr>
                <td>mousedown</td>
                <td>Срабатывает в момент нажатия кнопки мыши.</td>
            </tr>
            <tr>
                <td>mouseup</td>
                <td>Срабатывает в момент отпускания кнопки мыши.</td>
            </tr>
            <tr>
                <td>mousemove</td>
                <td>Происходит при движении курсора мыши.</td>
            </tr>
            <tr>
                <td>mouseover</td>
                <td>Срабатывает при наведении курсора на элемент.</td>
            </tr>
            <tr>
                <td>mouseout</td>
                <td>Срабатывает при уходе курсора с элемента.</td>
            </tr>
            <tr>
                <td>keydown</td>
                <td>Срабатывает при нажатии клавиши.</td>
            </tr>
            <tr>
                <td>keyup</td>
                <td>Происходит, когда пользователь отпускает клавишу.</td>
            </tr>
            <tr>
                <td>keypress</td>
                <td>Срабатывает при нажатии клавиши, если она обозначает символ (например, буква или цифра).</td>
            </tr>
            <tr>
                <td>focus</td>
                <td>Происходит при получении элементом фокуса.</td>
            </tr>
            <tr>
                <td>blur</td>
                <td>Происходит при потере элементом фокуса.</td>
            </tr>
            <tr>
                <td>change</td>
                <td>Происходит при изменении значения элемента формы (например, input, textarea).</td>
            </tr>
            <tr>
                <td>submit</td>
                <td>Срабатывает при отправке формы.</td>
            </tr>
            <tr>
                <td>load</td>
                <td>Происходит при полной загрузке элемента (например, изображение или весь документ).</td>
            </tr>
            <tr>
                <td>unload</td>
                <td>Срабатывает при закрытии страницы или переходе на другую страницу.</td>
            </tr>
            <tr>
                <td>resize</td>
                <td>Происходит при изменении размеров окна браузера.</td>
            </tr>
            <tr>
                <td>scroll</td>
                <td>Срабатывает при прокрутке элемента или всей страницы.</td>
            </tr>
        </tbody>

    </table>

    <h2>Встраиваем обработчик в тег</h2>
    <div class="blueCircle" onclick="alert('Привет! Я синий круг!')"></div>
    <div class="blueCircle" id="blueCircle"></div>

    <h2>Добавляем и удаляем Listner через кнопки</h2>
    <!-- Две кнопки в стиле BS5 dark -->
    <button class="btn btn-dark" id="addListner">Добавить Listner</button>
    <button class="btn btn-dark" id="removeListner">Удалить Listner</button>

    <!-- Вывод обработчика onclick для Body -->
    <p id="OnClickBodyInfo">Пока вы никуда не кликнули</p>

    <h2>Div - путешественник</h2>
    <div id="traveler"></div>

    <h2>Обработчик формы</h2>
    <!-- Создаем форму BS5 стиль введите число -->
    <form class="row g-3">
        <div class="col-auto">
            <label for="inputNumber" class="visually-hidden">Введите число</label>
            <input type="number" class="form-control" id="inputNumber" placeholder="Введите число">
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary mb-3">Отправить</button>
        </div>
    </form>
    <p id="formInfo"></p>
    <script>
        // Добавляем обработку событий через blueCircle.onclick
        // При клике на элемент с ID blueCircle будет выполняться функция

        // document.getElementById('blueCircle').onclick = function () {
        //     alert('Привет! Я второй синий круг!');
        // }

        // Стрелочная функция
        // document.getElementById('blueCircle').onclick = () => {
        //     alert('Привет! Я второйсиний круг!');
        // }

        // Добавляем обработку событий через addEventListener
        // Листнер - слушатель. Его можно как добавить, так и удалить. В этом его преимущество

        // document.getElementById('blueCircle').addEventListener('click', function () {
        //     alert('Привет! Я второй синий круг и работаю черерез addEventListener!');
        // });

        // Функция-обработчик события
        function blueCircleHandler() {
            alert('Привет! Я второй синий круг и работаю черерез addEventListener!');
        }

        // Функция которая добавляет обработчик событий Onclick на getElementById('blueCircle')
        function addListner() {
            document.getElementById('blueCircle').addEventListener('click', blueCircleHandler);
        }

        // Функция которая удаляет обработчик событий Onclick с getElementById('blueCircle')
        function removeListner() {
            document.getElementById('blueCircle').removeEventListener('click', blueCircleHandler);
        }

        // Listener по полной загрузке документа выполняет функцию addListner
        document.addEventListener('DOMContentLoaded', addListner);

        // Обработчики кнопок
        document.getElementById('addListner').addEventListener('click', addListner);
        document.getElementById('removeListner').addEventListener('click', removeListner);

        
        // Функция которая будет перемещать элемент div id = traveler по экрану
        // Сначала она изменит стиль элемента на position: absolute (чтобы можно было задавать координаты)
        // Затем будет задавать координаты элемента

        function moveTraveler(top, left) {
            // Получаем элемент div id = traveler
            let traveler = document.getElementById('traveler');
            // Изменяем стиль элемента на position: absolute
            traveler.style.position = 'absolute';
            // Задаем координаты элемента
            traveler.style.top = top + 'px';
            traveler.style.left = left + 'px';
            // Задаем рандомный цвет элемента
            traveler.style.backgroundColor = getRandomColor();
        }        
        
        // Функция генерации рандомного цвета в формате RGB
        function getRandomColor() {
            // Генерируем рандомное число от 0 до 255
            let r = Math.floor(Math.random() * 256);
            let g = Math.floor(Math.random() * 256);
            let b = Math.floor(Math.random() * 256);

            // Возвращаем строку в формате RGB
            return `rgb(${r}, ${g}, ${b})`;
        }

        
        // Обработчик события onclick для body с выводом информации о том, на какую ноду был в параграф OnClickBodyInfo
        // document.body - Обращение к DOM и к его элементу body (тег body)
        // onclick - обработчик события клика
        // function (event) - функция обработчик события.
        // Принимает event для того, чтобы можно было получить доступ инф
        // .textContent - свойство, которое позволяет изменять текст внутри тега
        document.body.onclick = function (event) {
            document.getElementById('OnClickBodyInfo').textContent = `Вы кликнули на тег: ${event.target.nodeName}`;
            
            // Запускаем путешественника
            moveTraveler(event.clientY, event.clientX);
            console.log(event);
        }

        // Listener ожидающий нажатия клавиши пробела и меняющий цвет на рандом у blueCircle
        document.addEventListener('keydown', function (event) {
            console.log(event);
            console.log(event.code)
            if (event.code == 'Space') {
                document.getElementById('blueCircle').style.backgroundColor = getRandomColor();
            }
        });

        // Listener ожидающий отправки формы и выводящий в параграф formInfo значение inputNumber
        let form = getElementByClassName('row g-3');
        form.addEventListener('submit', function (event) {
            event.preventDefault();
            let inputNumber = document.getElementById('inputNumber').value;
            document.getElementById('formInfo').textContent = inputNumber;
        });
        //     Когда форма отправляется, этот код будет выполнен. Внутри этой функции делается следующее:

// event.preventDefault(); - предотвращает стандартное действие браузера при отправке формы. 
// Обычно, когда форма отправляется, страница перезагружается и данные формы отправляются на сервер.
//  Вызывая этот метод, вы предотвращаете эту перезагрузку и даете возможность JavaScript обработать отправку формы.

// document.getElementById('formInfo').textContent - выбирает элемент с id равным formInfo
// document.getElementById('inputNumber').value - выбирает элемент с id равным inputNumber  и получает его значение с помощью свойства value.
// Затем, значение из поля ввода присваивается содержимому параграфа. Таким образом, при отправке формы, значение из поля ввода отобразится в параграфе.
// В итоге, когда пользователь пытается отправить форму, JavaScript отменяет стандартное действие отправки формы, и вместо этого обновляет содержимое параграфа значением из поля ввода.
    </script>
</body>

</html>